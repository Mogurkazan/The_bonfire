<!-- blog/templates/blog/post_detail.html -->

{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>{{ post.title }}</h2>
    <p>{{ post.content }}</p>
    <button class="btn btn-secondary" hx-get="{% url 'load_comments' post.pk %}" hx-target="#comments-container" hx-swap="innerHTML">Comments</button>
    <div id="comments-container"></div>
    {% if is_favorited %}
        <a href="{% url 'toggle_favorite' post.pk %}" class="btn btn-danger">Unfavorite</a>
    {% else %}
        <a href="{% url 'toggle_favorite' post.pk %}" class="btn btn-primary">Favorite</a>
    {% endif %}
    <h3>Add a comment</h3>
    <form method="post" action="{% url 'add_comment' post.pk %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Add Comment</button>
    </form>
</div>
{% endblock %}
